[Unit]
Description=Snapcast server
Wants=avahi-daemon.service
After=network-online.target time-sync.target avahi-daemon.service

[Service]
# Create a user in the audio group
DynamicUser=yes
User=snapserver
SupplementaryGroups=audio

# Read config from snapserver.conf if available
BindReadOnlyPaths=-/etc/snapserver.conf
# Use for default fifo. Created by snapserver.socket
BindPaths=%t/snapserver

# Store state in /var/lib/snapserver
StateDirectory=snapserver
Environment=HOME=/var/lib/snapserver

# Access to avahi socket
BindReadOnlyPaths=-/run/avahi-daemon

Environment=SNAPSERVER_OPTS=""
ExecStart=/bin/snapserver --logging.sink=system --server.datadir=${HOME} $SNAPSERVER_OPTS
Restart=on-failure

[Install]
WantedBy=multi-user.target
